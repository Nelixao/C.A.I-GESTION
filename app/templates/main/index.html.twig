{% extends 'base.html.twig' %}

{% block title %}Dasboard{% endblock %}

{% block stylesheets %}{% endblock %}

{% block body %}

<div class="container-fluid text-center">
    <div class="">
    <div class="row">
        <h1 class="card-title">Bienvenido al Sistema Administrativo</h1>
        <p class="text-muted">Gestiona oficios, correspondencias, circulares y documentos escaneados</p>
    </div>
    </div>

    <div class="row">
        <div class="col-sm-5 offset-sm-2 col-md-4 offset-md-0">
            <div class="card">
                <div class="card-header">
                    <span class="card-title"> Total Oficios</span>
                </div>
                <div class="card-body">{{ oficiosCount }}</div>
                <p class="text-muted">Total registrados</p>
            </div>
        </div>
        <div class="col-sm-5 offset-sm-2 col-md-4 offset-md-0">
            <div class="card">
                 <div class="card-header">
                    <span class="card-title"> Circulares</span>
                 </div>
                <div class="card-body">{{ circularesCount }}</div>
                <p class="text-muted">Total registradas</p>
            </div>
        </div>
         <div class="col-sm-5 offset-sm-2 col-md-4 offset-md-0">
             <div class="card">
                 <div class="card-header">
                     <span class="card-title"> Notas Informativas</span>
                 </div>
                 <div class="card-body">0</div>
                 <p class="text-muted">Total registradas</p>
             </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-5 offset-sm-2 col-md-6 offset-md-0">
            <div class="card">
                <div class="card-header">
                      <span class="card-title"> Escaner</span>
                </div>
                 <div class="card-body">{{ scansCount }}</div>
                 <p class="text-muted">Escaneados</p>
             </div>
        </div>
        <div class="col-sm-5 offset-sm-2 col-md-6 offset-md-0">
            <div class="card">
                 <div class="card-header">
                 <span class="card-title"> Correspondencias</span>
                </div>
                <div class="card-body">{{ correspondencesCount }}</div>
                 <p class="text-muted">Internas y externas</p>
             </div>
        </div>
    </div>
    <div class="card">
        <div class="card-header">
            <span class="card-title">Acciones Rápidas</span>
        </div>
        <div class="card-content ">
            <div class="row">
                <div class="col">
                    <a class="btn" href="{{ path('app_oficio_new') }}">  Nuevo Oficio</a>
                </div>
                <div class="col">
                    <a class="btn" href="{{ path('app_correspondence_new') }}"> Nueva Correspondencia</a>
                </div>
                <div class="col">
                    <a class="btn" href="{{ path('app_circular_new') }}"> Nueva Circular</a>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <a class="btn" href="{{ path('app_circular_new') }}"> Nueva Circular</a>
                </div>
                <div class="col">
                    <a class="btn" href="{{ path('app_scanner_new') }}">  Escanear Documento</a>
                </div>
            </div>
        </div>
    </div>
    <!-- Actividad reciente -->
    <div class="activity">
        <div class="card">
            <div class="card-header"><span class="card-title">Oficios Recientes</span></div>
            <div class="card-body">
                {% for o in recentOficios %}
                    <div class="activity-item">
                        <div>#{{ o.id }}: {{ o.sender }} → {{ o.recipient }} · {{ o.title|slice(0,40) }}</div>
                        <span class="badge default">{{ o.date ? o.date|date('Y-m-d') : '' }}</span>
                    </div>
                {% else %}
                    <div class="activity-item">
                        <div>No hay actividad reciente</div>
                        <span class="badge outline">—</span>
                    </div>
                {% endfor %}
            </div>
        </div>

        <div class="card">
            <div class="card-header"><span class="card-title">Circulares Activas</span></div>
            <div class="card-body">
                {% for c in activeCirculares %}
                    <div class="activity-item">
                        <div>#{{ c.id }} · {{ c.title|slice(0,48) }}</div>
                        <span class="badge default">{{ c.date ? c.date|date('Y-m-d') : '' }}</span>
                    </div>
                {% else %}
                    <div class="activity-item"><div>No hay circulares</div><span class="badge outline">—</span></div>
                {% endfor %}
            </div>
        </div>
</div>
{% endblock %}
